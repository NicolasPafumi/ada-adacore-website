
    <!DOCTYPE html>
    <html>
    <head>
        <title>Interactive Market Dashboard</title>
        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
        <style>
            body {
                background-color: #111111;
                color: #E0E0E0;
                font-family: "Arial", sans-serif;
                margin: 0;
                padding: 20px;
            }
            h1 { text-align: center; margin-bottom: 5px; }
            p { text-align: center; color: #888; font-size: 14px; margin-top: 0; }
            
            .container {
                display: flex;
                flex-direction: column;
                align-items: center;
                width: 100%;
                max-width: 1000px;
                margin: 0 auto;
            }
            
            #heatmap-container {
                width: 100%;
                height: 550px;
                margin-bottom: 20px;
                border: 1px solid #333;
                box-shadow: 0 0 20px rgba(0,0,0,0.5);
            }
            
            #chart-container {
                width: 100%;
                height: 500px;
                border: 1px solid #333;
                box-shadow: 0 0 20px rgba(0,0,0,0.5);
            }
            //how to use the dashboard
            .instruction {
                background-color: #222;
                padding: 10px;
                border-radius: 5px;
                margin-bottom: 20px;
                border-left: 4px solid #00FFFF;
                text-align: center;
            }
        </style>
    </head>
    <body>
        <h1>Market Sector Correlation</h1>
        <p>Changes in stock correlations during 2016 U.S election opposing Donald Trump and Hillary Clinton</p>
        
        <div class="container">
            <div class="instruction">
                <b>Interactive:</b> Click any cell in the heatmap below to compare the two stocks in the chart at the bottom.
            </div>
        
            <div id="heatmap-container"></div>
            <div id="chart-container"></div>
        </div>

        <script>
            // Data from pyhton 
            var dates = ["2016-10-03", "2016-10-04", "2016-10-05", "2016-10-06", "2016-10-07", "2016-10-10", "2016-10-11", "2016-10-12", "2016-10-13", "2016-10-14", "2016-10-17", "2016-10-18", "2016-10-19", "2016-10-20", "2016-10-21", "2016-10-24", "2016-10-25", "2016-10-26", "2016-10-27", "2016-10-28", "2016-10-31", "2016-11-01", "2016-11-02", "2016-11-03", "2016-11-04", "2016-11-07", "2016-11-08", "2016-11-09", "2016-11-10", "2016-11-11", "2016-11-14", "2016-11-15", "2016-11-16", "2016-11-17", "2016-11-18", "2016-11-21", "2016-11-22", "2016-11-23", "2016-11-25", "2016-11-28", "2016-11-29", "2016-11-30", "2016-12-01", "2016-12-02", "2016-12-05", "2016-12-06", "2016-12-07", "2016-12-08", "2016-12-09", "2016-12-12", "2016-12-13", "2016-12-14", "2016-12-15"];
            var stockData = {"AAPL": [0.9953114017535816, 0.9995576571988971, 1.0, 1.0074299169562457, 1.0089337500420306, 1.0265366685038753, 1.0287479410495073, 1.0379476706700452, 1.0347631998159994, 1.0405127733105712, 1.03980518669743, 1.0390974529309953, 1.0360014947831577, 1.0354705656991994, 1.0314019978561233, 1.0406896515696948, 1.0459970294164582, 1.0224674384709769, 1.0126491499800347, 1.005926083870461, 1.004334032385055, 0.9862003319925459, 0.9870849440181041, 0.9765049165019097, 0.9677025007745778, 0.9816616093758423, 0.9874406135291707, 0.9858404686126069, 0.9583668015105872, 0.9640572929577065, 0.9398735320447263, 0.9523211555889297, 0.9779274473928812, 0.9775715571518743, 0.978549611518983, 0.993398041051207, 0.9940204259072493, 0.9889522457395256, 0.9939313245878654, 0.9919752158536482, 0.9909971614865393, 0.9826394430130104, 0.9734815785045527, 0.9771269334747178, 0.9701032331859515, 0.977571557151874, 0.9871740453374879, 0.9968651198059574, 1.013135712345918, 1.007356634615943, 1.02416080499915, 1.02416080499915, 1.0297621215502388], "MSFT": [0.9968748793348571, 0.9937499810085572, 1.000694364206885, 1.0024306082323624, 1.0034723398250593, 1.0076388956311086, 0.9928818960522924, 0.99149324175147, 0.9881944744498949, 0.9968748793348573, 0.993402984187484, 1.0010415833668016, 0.9987844735449759, 0.9939234794190941, 1.0357637216972846, 1.0590277759764215, 1.0588540552270418, 1.0526041844614942, 1.0434027655542881, 1.0394097081587759, 1.0402774225503022, 1.0381943299296468, 1.031770664301772, 1.027951401768587, 1.0192709968836247, 1.0489583462258982, 1.0498266535210061, 1.0446180696704694, 1.019097276134245, 1.0246528568058548, 1.0090278463837214, 1.0289530382565846, 1.0425862632096137, 1.059889709558028, 1.0548209768397778, 1.0637350598487991, 1.0682794434621596, 1.0556951390577531, 1.0579672938079594, 1.0593655086790337, 1.0677552425831653, 1.0532480036380563, 1.0347209525233196, 1.0355948182895043, 1.0525489703154667, 1.047829828371459, 1.0726492169707682, 1.0663568794861955, 1.0831362731815108, 1.0866317362462488, 1.1007892361912197, 1.0955457451423223, 1.0937979394970057], "GOOGL": [0.9954233015823606, 0.9984205457353396, 0.9964805732192396, 0.9987812551924284, 0.9958337245082237, 1.0125737790897882, 1.0068529060677391, 1.0095889633040027, 1.0000248567343872, 1.0006715142397533, 1.0034576673560902, 1.0216776536619414, 1.0283313234432845, 1.0218517464054768, 1.0248737516900188, 1.0394002184715743, 1.0304580082757624, 1.022436166472051, 1.0165287723392724, 1.0192772579427298, 1.0072632333907774, 1.0017660709782132, 0.9805489361222074, 0.9728006139995801, 0.9714449659472296, 0.997475511814501, 1.0098501502207176, 1.0019028786201674, 0.9704375033819492, 0.9598164119839281, 0.936770873108091, 0.9640573532816905, 0.9700521283961225, 0.9777381174771326, 0.9650648158469706, 0.976046712304905, 0.9762952796487774, 0.9688331923829016, 0.970363028781612, 0.9772777898768457, 0.9818173943985534, 0.9649530561450526, 0.950588349342663, 0.9507501093218294, 0.967863206124852, 0.9653260027636857, 0.9843420737897012, 0.9889437245445523, 1.006703574455766, 1.0047758391012105, 1.014028758476863, 1.0172002865790264, 1.0144144202711636], "JNJ": [1.0057565974708147, 1.0058411060969514, 1.0088887557810826, 1.0052482943523045, 1.009396474930804, 1.0141368832851616, 0.9958520696938387, 0.9986458598031092, 1.001100614318481, 0.995175083019506, 1.0030477331082441, 0.9769746112060943, 0.9700331410630002, 0.9724033035281227, 0.9602978808106356, 0.9617371970265646, 0.964700087812221, 0.9697791980640267, 0.9794296159938038, 0.9762975411076485, 0.9818843705091757, 0.9763822165820105, 0.9723188783260984, 0.9737576939973513, 0.9744350977922475, 0.9875564593538533, 0.9908577183405075, 1.0184544148123846, 1.0119361551928756, 1.0028781318871818, 0.9870482396594561, 0.9846780771943334, 0.9850166122435562, 0.9867942966604827, 0.9832994937324296, 0.980231071444243, 0.9609673593148275, 0.9637802535458999, 0.9728153352206088, 0.9642915599324662, 0.95875128118581, 0.9486930861932923, 0.9493749948902727, 0.9543187912313243, 0.954148272345023, 0.955171051966381, 0.9469883978749538, 0.9460508776967466, 0.9568759905570574, 0.9832994937324293, 0.9878170762818402, 0.9801458954252046, 0.9878170762818402], "PFE": [0.9943901560623183, 0.9955712273086074, 1.000885292244678, 0.9935045082071782, 0.9908472979339121, 0.9923233480582735, 0.9781518266420335, 0.9763803531265227, 0.9672275621578194, 0.9642750173960192, 0.9595510880213238, 0.965161020861621, 0.9625035438805085, 0.9607322481702286, 0.950103051466702, 0.9486269124397252, 0.9530557740337332, 0.9565985432595239, 0.9589606857521025, 0.9427218229161249, 0.9362266867337651, 0.9173307914297523, 0.9043399856493399, 0.8824919011939891, 0.8857395137364765, 0.8969587570987629, 0.8945733221209357, 0.9577898383065903, 0.9986421014515753, 0.9718048911196335, 0.9655428575949905, 0.9610701670115644, 0.9530189683509357, 0.9461603982766053, 0.9387056472630486, 0.9413894394183351, 0.9342326899717761, 0.9369166599322936, 0.9449677696903066, 0.9404949902042652, 0.9518262508620219, 0.9583864637588931, 0.9381093774212068, 0.9431786934569363, 0.9419858870654072, 0.9410909933382602, 0.9300579120527319, 0.9226033388444063, 0.9452660379651505, 0.9661391274368316, 0.9789614627609611, 0.9786630166808863, 0.976575672172672], "MRK": [1.0017625698269765, 1.0008011834578374, 1.0062492647513988, 1.004005748387858, 1.0057685715668292, 1.0238744563171758, 0.9923091623988819, 0.9879827548364262, 1.0016023669156748, 0.9956738457895388, 0.98573949182488, 0.9948726623317014, 0.991347607128413, 0.9921487905862506, 0.9806119852552517, 0.9734017563880383, 0.9926296526721499, 0.9753249513796408, 0.98205423371029, 0.9427976799375535, 0.9408750761006054, 0.9501685339693933, 0.9427976799375535, 0.9362283471662113, 0.9424772741149505, 0.9621856946823019, 0.9695562109114817, 1.0283609823402677, 1.0408591740404056, 1.0246758086763426, 1.0179459351910392, 1.0198686234786527, 1.0035253085552827, 1.004647066737053, 0.9913476071284126, 0.9982374301730228, 0.9886237353829617, 0.9876625179151524, 0.9967955195206439, 0.9902260178479718, 0.9964747758953811, 0.980452204597274, 0.9735617903980094, 0.9794905648761404, 0.965390175161657, 0.9658709527968915, 0.962345897593603, 0.9633071995120772, 0.9810926784398205, 0.9889438034029052, 0.9976628278490921, 0.9978246353230268, 1.0070276465297145], "XOM": [0.9973649451912427, 0.9881991440394773, 0.9967919464974185, 0.9972506358457345, 0.9938131716705275, 1.0132909033586424, 1.0052707036037212, 0.9982814659077989, 0.9917511155555948, 0.9915215728860347, 0.9915215728860347, 0.9941570236855962, 0.998739825263778, 0.9991983826151593, 0.992438489593395, 0.9957609844384195, 0.9935840249917719, 0.997823304547222, 0.9958755577777976, 0.971356995147859, 0.9546289576063467, 0.9584098118073504, 0.9561184770167269, 0.9585244511451958, 0.9574931590938598, 0.9790329468969076, 0.9860841571537028, 0.9969493528421285, 1.0061965961026456, 0.9902448985329665, 0.9857373352076022, 1.0035377818456304, 0.9911699990502824, 0.9851592546317892, 0.9857373352076022, 0.9997232684262609, 1.0019197634192543, 1.0046936790033865, 1.0070056713143012, 0.9994921417934838, 0.9929037787884495, 1.009086272998569, 1.0083928931002368, 1.0060807687923876, 1.0111670066797713, 1.0120915792093481, 1.0179862323237134, 1.0208763712089084, 1.0287362606865549, 1.0516232092058362, 1.0701169037452618, 1.0469992245840072, 1.0505823473767297], "CVX": [0.9954335002651477, 0.9839682126230533, 0.9932959359449786, 0.9928100609009568, 0.9936847239412812, 1.0102995833613253, 1.0011663639889077, 0.9925189097091557, 0.9793045158891256, 0.982122129348755, 0.984842875663378, 0.9890210272073535, 0.9936847239412815, 0.9897980534431766, 0.9842601334743499, 0.9780413947065683, 0.9791104517450439, 0.9831912963385872, 0.9708512357048121, 1.008744871181541, 1.0177810035062393, 1.0345899270703653, 1.023999192517239, 1.023999192517239, 1.0180723746007534, 1.0381852264739562, 1.0424605750170073, 1.045861040617021, 1.0473186657490865, 1.0361445292987934, 1.0356587642061281, 1.0586864265380358, 1.0632987759885153, 1.0610416945439172, 1.0716402356433494, 1.0812574608867296, 1.0855756904587848, 1.0893048006631392, 1.0893048006631392, 1.0843980014801657, 1.073014187793179, 1.0948002794083873, 1.1117779783046187, 1.1089318874436764, 1.1113854519621977, 1.1065768393405078, 1.123063385527609, 1.1302274860578936, 1.1365080174879836, 1.1496583096672206, 1.152307807502883, 1.13798004624774, 1.148677103762525], "COP": [0.9990800013943272, 0.9861973305184768, 1.010121856242527, 1.0241544961320288, 1.0172531613912672, 1.021164178985758, 0.9967793615244769, 1.0, 0.9752429135542874, 0.9641370155736522, 0.9509488677291158, 0.9405370335408214, 0.9652940030127762, 0.9599722234114555, 0.9611289769030635, 0.9773257482869779, 0.9673764283373142, 0.9671447033229672, 1.0180474132072264, 1.04049058326157, 1.005321721114442, 1.007404087952101, 1.0002313740930733, 1.00879233251054, 0.9893565577711166, 1.0161963034888828, 1.0256825243311265, 1.058075014335134, 1.036094475493179, 1.0166588177275133, 1.0210549254959043, 1.047663414094355, 1.026839745717766, 1.0090234726560972, 1.0356317273070323, 1.0726514652249883, 1.0659419674471389, 1.0712635715878227, 1.0585377625212806, 1.0527531762469344, 1.0233689003741522, 1.1226287372238337, 1.115687046536606, 1.1133733056058737, 1.1309580876007115, 1.154558245094179, 1.154558245094179, 1.151781522029785, 1.1746879081653063, 1.1888016108690145, 1.2179548635699968, 1.1913469598403355, 1.1971310782196503], "JPM": [0.9987987208393395, 1.0074210740932796, 1.023908709542041, 1.0266314767462164, 1.0302616126406918, 1.038278441273992, 1.0332868850478025, 1.0305644116806383, 1.0246648990901264, 1.0213373418578389, 1.0160427662139446, 1.0240597417657504, 1.0338917485351673, 1.0325307689589698, 1.036009799170483, 1.0417582060780333, 1.0406994378677599, 1.0456907002569382, 1.04720337319012, 1.0453882685132558, 1.047657351372281, 1.0432709524704675, 1.0388838189761265, 1.0343457267173284, 1.0249676981300726, 1.0570355268780425, 1.059304536277815, 1.1080117672907834, 1.1594419124264328, 1.1600467759137976, 1.2027032417347867, 1.2004341588757614, 1.1707865186697788, 1.1801646207162875, 1.1754754227745274, 1.1806189661947124, 1.1878790910651578, 1.1928706472913473, 1.1924171833239556, 1.1847023456788213, 1.1937780894409002, 1.2126870153204408, 1.2371911855654911, 1.2343174595968593, 1.2594273013810553, 1.265931677458932, 1.2716798639887237, 1.287562342113109, 1.293159349500686, 1.2816634171966195, 1.282116366949242, 1.2816634171966197, 1.3008737463903035], "BAC": [0.998721940000009, 1.0095844752973628, 1.0293929807319295, 1.0364217858920348, 1.030670665846317, 1.0415334260750329, 1.0293929807319293, 1.024281115617569, 1.011501415343108, 1.0223643255260655, 1.0255588007319565, 1.0389776809606546, 1.0523958863952665, 1.0581468564867431, 1.0651755866697277, 1.0715653618298375, 1.0683703617841016, 1.0779549870357061, 1.0805112569899296, 1.0658146166697233, 1.0543130513723737, 1.0613419315096, 1.0530350663495036, 1.0530350663495036, 1.0575076765325062, 1.0869010321500394, 1.0862616272644405, 1.148242888682519, 1.1987217600549196, 1.2153353404208709, 1.2830671220677015, 1.288178612296458, 1.2619805566331437, 1.2830671220677015, 1.2779548820677373, 1.2990411475938122, 1.2971245824336708, 1.3137378628911394, 1.3329069634401067, 1.2971245824336708, 1.2964860772735205, 1.354527515928515, 1.378898679068083, 1.3615819632639106, 1.4007042750904568, 1.421227462439837, 1.4475231383143439, 1.4718941514996704, 1.4808729616157636, 1.4500882555688137, 1.4500882555688137, 1.4539366812217258, 1.485362591605172], "C": [0.9957654414662978, 1.0110100671671174, 1.0300658492931423, 1.0389584759587898, 1.0434046818018679, 1.0491213089499294, 1.037264545055563, 1.0311243008195126, 1.0262548003576828, 1.0292189375864016, 1.0290069678077887, 1.037264545055563, 1.0476393478253159, 1.04975668083704, 1.049544711058427, 1.04975668083704, 1.0499683281464156, 1.0588608473223178, 1.0571671313985826, 1.0493332787285425, 1.0406524068620164, 1.0362060935291926, 1.027736546502805, 1.0237004140397516, 1.0232757220543054, 1.0583264083064636, 1.0602382209243195, 1.0959267513277406, 1.1388376252376466, 1.122267973441004, 1.1615675143630488, 1.1779246589323498, 1.1605058381443063, 1.1779246589323498, 1.1781371661596918, 1.1798367940194432, 1.1917330066504985, 1.204266096025105, 1.2061780161327065, 1.1783496733870338, 1.1794121020339967, 1.197893351469004, 1.2165872156210984, 1.1900330563215102, 1.2167997228484402, 1.230395025890518, 1.2546121431380757, 1.2777670467181614, 1.275430219645622, 1.265021127646976, 1.2701193662877552, 1.2628968078017786, 1.2794663521086753], "PG": [0.9878546586004915, 0.9844006121697565, 0.9899716583222722, 0.9940942827031033, 1.0027854684806388, 0.9923119541257034, 0.9865178302740131, 0.98685217384468, 0.9831751589060084, 0.985292267819027, 0.9786069250830178, 0.9743728164482184, 0.9604501692682568, 0.9536010396752911, 0.9468641586749597, 0.9442814583232328, 0.9765060856644568, 0.9813344130162941, 0.9721275170218218, 0.9750466355777371, 0.9745970952510108, 0.9751589933616094, 0.9739234945039681, 0.9723515774421384, 0.9552854237122311, 0.9719028014540778, 0.9820076861896233, 0.9648289562933681, 0.9314818430258028, 0.9384433304026405, 0.9319308373963393, 0.938892215581939, 0.9340644341862916, 0.9327167959272542, 0.9207030299695007, 0.9278890145316068, 0.9292361068344543, 0.9283378997109053, 0.937095692143603, 0.9327167959272541, 0.930695666112412, 0.9258675571430506, 0.919130785333957, 0.9251939563960078, 0.9318186979949431, 0.9309202724889182, 0.945179993020496, 0.9375447957053775, 0.9473133714279722, 0.9558469942491158, 0.9564080188298106, 0.9473133714279725, 0.9507939513295344], "KO": [0.9931477895281501, 0.988658171220451, 0.9879488812090829, 0.9855862890449323, 0.9860589280335561, 0.9860589280335561, 0.981568948058476, 0.9872403145324765, 0.9867674947101625, 0.9846410713455818, 0.9829868047464504, 0.9917296917285887, 0.9936202476830833, 0.9907847151408251, 0.9955106228038878, 1.0056713061961036, 1.0051989685969638, 1.0028355325422582, 0.9952743334485245, 0.997873094412245, 1.0018910381776691, 0.9952743334485246, 0.9936202476830834, 0.9931477895281502, 0.9851137103342057, 1.0033084126424692, 1.0132329875130117, 0.9988186135010795, 0.9673911647913913, 0.969518130657043, 0.9728258199647508, 0.9792060545048417, 0.9749528461082995, 0.9716445540216239, 0.9666827789484751, 0.9773154985503468, 0.9775522701288843, 0.9716445540216239, 0.9813328395368032, 0.986531265632696, 0.9805740613721818, 0.9615102120702994, 0.9572210177693816, 0.9617490330973274, 0.967944395328005, 0.9667533040877037, 0.9839102621250648, 0.9765228442077375, 1.0008287005248822, 0.9984460960990017, 0.9951097145124284, 0.9820035516942341, 0.9901059257452265], "PEP": [0.9952195836732451, 0.9846468096288273, 0.9746256577711828, 0.9782110628038329, 0.9744416599921464, 0.9765561962435131, 0.9705802118971497, 0.9752691396660982, 0.973798270884815, 0.9821643706069719, 0.9823484611735922, 0.9832673366177664, 0.9769237278636661, 0.9733386011937679, 0.9710401599509487, 0.9865777192514935, 0.985841728135348, 0.9843708593540648, 0.9803254134800318, 0.9843708593540648, 0.9855659634357535, 0.9810613118085934, 0.9810613118085934, 0.9803254134800318, 0.9727867006442428, 0.9833593819010765, 0.9995405158841209, 0.9860256331268004, 0.9492511299671975, 0.9486993222052563, 0.9321503782393071, 0.9363793579544566, 0.9350926725273776, 0.9342653784285936, 0.9314151294238333, 0.9401493174916469, 0.9459411184838059, 0.9334376203918898, 0.939321745030111, 0.9450219646768799, 0.9427231522837248, 0.9270989293797407, 0.9171887514725386, 0.9317295865459485, 0.9327485797932393, 0.9405281691970457, 0.9521981564220511, 0.9460854959644821, 0.9592369297553448, 0.9698880165206435, 0.9783161911364844, 0.9675725023623717, 0.975259582544948]};
            var corrZ = [[1.0, 0.5420245162282458, 0.6448421074275036, 0.15182380166478343, -0.030880893286046603, 0.1384664554784819, 0.134838452413061, 0.05511630037805062, 0.044679985670221474, -0.3451713646823466, -0.2831487355469812, -0.2262362132070045, 0.40030474442520997, 0.4876963578880342, 0.6121275801434938], [0.5420245162282458, 1.0, 0.740798219692635, 0.028151393305786632, -0.054851342712463565, 0.06373168602012047, 0.17360264936605396, 0.10848724327220256, 0.055259690111998515, -0.15222484378160778, -0.1179991759055851, -0.04047685329752875, 0.4541589814086307, 0.6312191595228637, 0.5975009875157846], [0.6448421074275036, 0.740798219692635, 1.0, 0.05828357235015451, 0.0014113871096332645, 0.11361405530772671, 0.27951069516341037, 0.23482564232018382, 0.1252739598326753, -0.18176830937704455, -0.15620067278372168, -0.017469226106622247, 0.39588382772204544, 0.647236610248764, 0.6435935510019701], [0.15182380166478343, 0.028151393305786632, 0.05828357235015451, 1.0, 0.4874853290704386, 0.5347011566826777, 0.32794231380960026, 0.09461099418677917, 0.18234146147091615, 0.057733110632897953, -0.01953198582877464, 0.0377947326855258, 0.1571441253986363, 0.04631575381075436, 0.20245095909836244], [-0.030880893286046603, -0.054851342712463565, 0.0014113871096332645, 0.4874853290704386, 1.0, 0.7048797153610934, 0.4568091793132123, 0.004513360138726824, 0.22173018692324492, 0.5313551064507576, 0.40874448129402824, 0.42114594732629934, -0.19548872854946797, -0.22954205268989203, -0.19754998252776912], [0.1384664554784819, 0.06373168602012047, 0.11361405530772671, 0.5347011566826777, 0.7048797153610934, 1.0, 0.47565188167985534, -0.07177378630978413, 0.0704999366855491, 0.3966006810629922, 0.32853732336476993, 0.3333001083642796, 0.005811454140196571, -0.008606697102929184, -0.013195844021574593], [0.134838452413061, 0.17360264936605396, 0.27951069516341037, 0.32794231380960026, 0.4568091793132123, 0.47565188167985534, 1.0, 0.38178374320179226, 0.5441450404924134, 0.33071395151557564, 0.37376250161467506, 0.46556772596822865, 0.11437083511346917, 0.0954149277612358, 0.13817159026165174], [0.05511630037805062, 0.10848724327220256, 0.23482564232018382, 0.09461099418677917, 0.004513360138726824, -0.07177378630978413, 0.38178374320179226, 1.0, 0.425159293542956, 0.16425700371009833, 0.1628366722947028, 0.2731478244582098, 0.219305890119813, 0.16726147332177457, 0.11625302334708065], [0.044679985670221474, 0.055259690111998515, 0.1252739598326753, 0.18234146147091615, 0.22173018692324492, 0.0704999366855491, 0.5441450404924134, 0.425159293542956, 1.0, 0.2441318462944106, 0.3517412038711729, 0.2750864605536787, 0.07401051946287604, 0.03825518042901493, 0.07484548321678482], [-0.3451713646823466, -0.15222484378160778, -0.18176830937704455, 0.057733110632897953, 0.5313551064507576, 0.3966006810629922, 0.33071395151557564, 0.16425700371009833, 0.2441318462944106, 1.0, 0.8588588568628418, 0.8566725189954516, -0.2464272018623899, -0.18521334335510478, -0.4627115279409923], [-0.2831487355469812, -0.1179991759055851, -0.15620067278372168, -0.01953198582877464, 0.40874448129402824, 0.32853732336476993, 0.37376250161467506, 0.1628366722947028, 0.3517412038711729, 0.8588588568628418, 1.0, 0.8591481158052072, -0.21927204570573816, -0.19011688642040414, -0.4635857251662184], [-0.2262362132070045, -0.04047685329752875, -0.017469226106622247, 0.0377947326855258, 0.42114594732629934, 0.3333001083642796, 0.46556772596822865, 0.2731478244582098, 0.2750864605536787, 0.8566725189954516, 0.8591481158052072, 1.0, -0.1523119115712437, -0.15340398541143732, -0.4208200344143533], [0.40030474442520997, 0.4541589814086307, 0.39588382772204544, 0.1571441253986363, -0.19548872854946797, 0.005811454140196571, 0.11437083511346917, 0.219305890119813, 0.07401051946287604, -0.2464272018623899, -0.21927204570573816, -0.1523119115712437, 1.0, 0.6559386297315798, 0.6445917225648305], [0.4876963578880342, 0.6312191595228637, 0.647236610248764, 0.04631575381075436, -0.22954205268989203, -0.008606697102929184, 0.0954149277612358, 0.16726147332177457, 0.03825518042901493, -0.18521334335510478, -0.19011688642040414, -0.15340398541143732, 0.6559386297315798, 1.0, 0.7844969799371994], [0.6121275801434938, 0.5975009875157846, 0.6435935510019701, 0.20245095909836244, -0.19754998252776912, -0.013195844021574593, 0.13817159026165174, 0.11625302334708065, 0.07484548321678482, -0.4627115279409923, -0.4635857251662184, -0.4208200344143533, 0.6445917225648305, 0.7844969799371994, 1.0]];
            var stocks = ["AAPL", "MSFT", "GOOGL", "JNJ", "PFE", "MRK", "XOM", "CVX", "COP", "JPM", "BAC", "C", "PG", "KO", "PEP"];
            var labels = ["<span style='color:#00b2b2; font-weight:bold'>AAPL</span>", "<span style='color:#33ffff; font-weight:bold'>MSFT</span>", "<span style='color:#b2ffff; font-weight:bold'>GOOGL</span>", "<span style='color:#00b200; font-weight:bold'>JNJ</span>", "<span style='color:#33ff33; font-weight:bold'>PFE</span>", "<span style='color:#b2ffb2; font-weight:bold'>MRK</span>", "<span style='color:#b27300; font-weight:bold'>XOM</span>", "<span style='color:#ffb733; font-weight:bold'>CVX</span>", "<span style='color:#ffe4b2; font-weight:bold'>COP</span>", "<span style='color:#8400b2; font-weight:bold'>JPM</span>", "<span style='color:#ca33ff; font-weight:bold'>BAC</span>", "<span style='color:#ebb2ff; font-weight:bold'>C</span>", "<span style='color:#b2003b; font-weight:bold'>PG</span>", "<span style='color:#ff3377; font-weight:bold'>KO</span>", "<span style='color:#ffb2cc; font-weight:bold'>PEP</span>"];
            var colorMap = {"AAPL": "#00b2b2", "MSFT": "#33ffff", "GOOGL": "#b2ffff", "JNJ": "#00b200", "PFE": "#33ff33", "MRK": "#b2ffb2", "XOM": "#b27300", "CVX": "#ffb733", "COP": "#ffe4b2", "JPM": "#8400b2", "BAC": "#ca33ff", "C": "#ebb2ff", "PG": "#b2003b", "KO": "#ff3377", "PEP": "#ffb2cc"};
            var sectorMap = {"AAPL": "Technology", "MSFT": "Technology", "GOOGL": "Technology", "JNJ": "Healthcare", "PFE": "Healthcare", "MRK": "Healthcare", "XOM": "Energy", "CVX": "Energy", "COP": "Energy", "JPM": "Financial Services", "BAC": "Financial Services", "C": "Financial Services", "PG": "Consumer Defensive", "KO": "Consumer Defensive", "PEP": "Consumer Defensive"};

            // Creation of the heatmap 
            var heatmapData = [{
                z: corrZ,
                x: stocks,
                y: stocks,
                type: 'heatmap',
                colorscale: [
                    [0.0, '#B2182B'], 
                    [0.5, '#111111'], 
                    [1.0, '#2166AC']
                ],
                zmin: -1, zmax: 1,
                xgap: 1, ygap: 1,
                hovertemplate: '<b>%{y}</b> vs <b>%{x}</b><br>Corr: %{z:.2f}<extra></extra>',
                colorbar: {
                    title: 'Correlation',
                    titlefont: {color: '#E0E0E0'},
                    tickfont: {color: '#E0E0E0'}
                }
            }];

            var heatmapLayout = {
                title: { text: 'Correlation Matrix', font: {color: '#E0E0E0', size: 16} },
                paper_bgcolor: '#111111',
                plot_bgcolor: '#111111',
                xaxis: { 
                    tickmode: 'array', 
                    tickvals: [...Array(stocks.length).keys()], 
                    ticktext: labels, 
                    tickangle: -45,
                    tickfont: { size: 10 }
                },
                yaxis: { 
                    tickmode: 'array', 
                    tickvals: [...Array(stocks.length).keys()], 
                    ticktext: labels, 
                    autorange: 'reversed',
                    tickfont: { size: 10 }
                },
                margin: {t: 50, b: 50, l: 80, r: 50}
            };

            Plotly.newPlot('heatmap-container', heatmapData, heatmapLayout);

            // Render chart showing the first stocks by default 
            var s1 = stocks[0];
            var s2 = stocks[1];

            // Traces of the plot below the heatmap 
            function drawChart(stockA, stockB) {
                var trace1 = {
                    x: dates,
                    y: stockData[stockA],
                    mode: 'lines',
                    name: stockA,
                    // Use the specific shade from colorMap
                    line: { color: colorMap[stockA] || '#888', width: 2 },
                    hovertemplate: '<b>' + stockA + '</b> (' + (sectorMap[stockA]||'') + ')<br>$%{y:.2f}<extra></extra>'
                };

                var trace2 = {
                    x: dates,
                    y: stockData[stockB],
                    mode: 'lines',
                    name: stockB,
                    // Use the specific shade from colorMap
                    line: { color: colorMap[stockB] || '#888', width: 2 },
                    hovertemplate: '<b>' + stockB + '</b> (' + (sectorMap[stockB]||'') + ')<br>$%{y:.2f}<extra></extra>'
                };

                var layout = {
                    title: { 
                        text: 'Performance: ' + stockA + ' vs ' + stockB, 
                        font: {color: '#E0E0E0', size: 16} 
                    },
                    paper_bgcolor: '#111111',
                    plot_bgcolor: '#111111',
                    xaxis: { 
                        showgrid: true, gridcolor: '#333', 
                        tickfont: {color: '#E0E0E0'},
                        type: 'date'
                    },
                    yaxis: { 
                        title: 'Growth of $1', 
                        titlefont: {color: '#E0E0E0'},
                        showgrid: true, gridcolor: '#333', 
                        tickfont: {color: '#E0E0E0'},
                        tickprefix: '$'
                    },
                    legend: { font: {color: '#E0E0E0'} },
                    hovermode: 'x unified'
                };

                Plotly.newPlot('chart-container', [trace1, trace2], layout);
            }

            drawChart(s1, s2);

            // Element that renders the heatmap clickable 
            var heatmapDiv = document.getElementById('heatmap-container');
            
            heatmapDiv.on('plotly_click', function(data){
                if(data.points.length > 0){
                    var pt = data.points[0];
                    var stockA = pt.y; 
                    var stockB = pt.x; 
                    drawChart(stockA, stockB);
                }
            });

        </script>
    </body>
    </html>
    